<!DOCTYPE html><html lang=en> <head><meta charset=UTF-8><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=generator content="Asciidoctor 1.5.7.1"><meta name=author content="Jonas Aleshkevich, Kubin"><title>How to install and use oitimetool in modern times?</title><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"><link rel=stylesheet href=./asciidoctor.css></head> <body class=article> <div id=header> <h1>How to install and use oitimetool in modern times?</h1> <div class=details> <span id=author class=author>Jonas Aleshkevich</span><br> <span id=email class=email><a href=https://github.com/Aleshkev>@Aleshkev</a></span><br> <span id=author2 class=author>Kubin</span><br> <span id=email2 class=email><a href=https://github.com/KubinGH/ >@KubinGH</a></span><br> <span id=revdate>2018-09-09</span> </div> </div> <div id=content> <div id=preamble> <div class=sectionbody> <div class="admonitionblock note"> <table> <tr> <td class=icon> <div class=title>Note</div> </td> <td class=content> After our small success, <a href=https://github.com/sio2project/sio2jail>SIO2Jail</a> was introduced, making the whole oitimetool obsolete. </td> </tr> </table> </div> <div class="olist arabic"> <div class=title>Limitations: why can&#8217;t we just run oitimetool on our favorite system?</div> <ol class=arabic> <li> <p>Oitimetool requires pintool</p> <div class="olist loweralpha"> <ol class=loweralpha type=a> <li> <p>Different version of pintool on Linux (2.14-71313) and different one on Windows (2.13-61206).</p> </li> <li> <p>The 2.13 version for Windows is not available for download anymore.</p> </li> </ol> </div> </li> <li> <p>pintool 2.14 for Linux requires Linux kernel &lt; 4.0 and support for IA32.</p> </li> </ol> </div> </div> </div> <div class=sect1> <h2 id=_the_outdated_ubuntu_method>The outdated Ubuntu method</h2> <div class=sectionbody> <div class="olist arabic"> <div class=title>Install Ubuntu 13.10</div> <ol class=arabic> <li> <p>Install <a href=http://old-releases.ubuntu.com/releases/13.10/ubuntu-13.10-desktop-i386.iso>Ubuntu 13.10 32-bit i386</a> (<a href=http://old-releases.ubuntu.com/releases/13.10/ >index</a>) in a virtual machine.</p> <div class="olist loweralpha"> <ol class=loweralpha type=a> <li> <p>Don&#8217;t check "Download updates while installing" in installer.</p> </li> </ol> </div> </li> </ol> </div> <div class="olist arabic"> <div class=title>Repair package manager</div> <ol class=arabic> <li> <p>Open <code>/etc/apt/sources.list</code>.</p> </li> <li> <p>Make file look like the one in <a href=#sources-list>source below</a>.</p> </li> <li> <p><code>sudo apt-get update</code></p> </li> <li> <p>To test if all went well, use <code>sudo apt-get upgrade</code>. This should update <code>openssl</code> and Firefox should be able to open GitHub website by now.</p> <div class=ulist> <ul> <li> <p>If this doesn&#8217;t work, try <code>sudo apt-get dist-upgrade</code>.</p> </li> </ul> </div> </li> </ol> </div> <div class="olist arabic"> <div class=title>Download oitimetool and pintool.</div> <ol class=arabic> <li> <p>Download oitimetool from <a href=https://github.com/accek/oitimetool-bin/zipball/master>official repository</a> (<a href=https://github.com/olimpiada/oitimetool-bin>readme</a>) and unpack all contents to <code>~/oitime/</code>.</p> </li> <li> <p>Save <code>pintool</code> from <a href=https://software.intel.com/sites/landingpage/pintool/downloads/pin-2.14-71313-gcc.4.4.7-linux.tar.gz>official page</a> (<a href=https://software.intel.com/en-us/articles/pin-a-binary-instrumentation-tool-downloads>index</a>) as <code>~/oitime/pin-2.14-71313-gcc-4.4.7-linux.tar.gz</code>.</p> </li> <li> <p><code>cd ~/oitime/</code></p> </li> <li> <p><code>./oitimetool test-programs/primes-gcc34</code> should now work. Yay! if it does.</p> <div class=ulist> <ul> <li> <p>If this doesn&#8217;t work, try <code>chmod +x ./oitimetool</code>, <code>chmod +x test-programs/*</code> and then try the above again.</p> </li> </ul> </div> </li> </ol> </div> <div class="olist arabic"> <div class=title>Install g++</div> <ol class=arabic> <li> <p><code>sudo apt-get build-essential</code></p> </li> </ol> </div> <div id=sources-list class=listingblock> <div class=title>sources.list</div> <div class=content> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to
# newer versions of the distribution.
deb http://old-releases.ubuntu.com/ubuntu/ saucy main restricted
deb-src http://old-releases.ubuntu.com/ubuntu/ saucy main restricted

## Major bug fix updates produced after the final release of the
## distribution.
deb http://old-releases.ubuntu.com/ubuntu/ saucy-updates main restricted
deb-src http://old-releases.ubuntu.com/ubuntu/ saucy-updates main restricted

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team. Also, please note that software in universe WILL NOT receive any
## review or updates from the Ubuntu security team.
#deb http://old-releases.ubuntu.com/ubuntu/ saucy universe
#deb-src http://old-releases.ubuntu.com/ubuntu/ saucy universe
#deb http://old-releases.ubuntu.com/ubuntu/ saucy-updates universe
#deb-src http://old-releases.ubuntu.com/ubuntu/ saucy-updates universe

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team, and may not be under a free licence. Please satisfy yourself as to
## your rights to use the software. Also, please note that software in
## multiverse WILL NOT receive any review or updates from the Ubuntu
## security team.
#deb http://old-releases.ubuntu.com/ubuntu/ saucy multiverse
#deb-src http://old-releases.ubuntu.com/ubuntu/ saucy multiverse
#deb http://old-releases.ubuntu.com/ubuntu/ saucy-updates multiverse
#deb-src http://old-releases.ubuntu.com/ubuntu/ saucy-updates multiverse

## N.B. software from this repository may not have been tested as
## extensively as that contained in the main release, although it includes
## newer versions of some applications which may provide useful features.
## Also, please note that software in backports WILL NOT receive any review
## or updates from the Ubuntu security team.
deb http://old-releases.ubuntu.com/ubuntu/ saucy-backports main restricted universe multiverse
deb-src http://old-releases.ubuntu.com/ubuntu/ saucy-backports main restricted universe multiverse

#deb http://security.ubuntu.com/ubuntu saucy-security main restricted
#deb-src http://security.ubuntu.com/ubuntu saucy-security main restricted
#deb http://security.ubuntu.com/ubuntu saucy-security universe
#deb-src http://security.ubuntu.com/ubuntu saucy-security universe
#deb http://security.ubuntu.com/ubuntu saucy-security multiverse
#deb-src http://security.ubuntu.com/ubuntu saucy-security multiverse

## Uncomment the following two lines to add software from Canonical's
## 'partner' repository.
## This software is not part of Ubuntu, but is offered by Canonical and the
## respective vendors as a service to Ubuntu users.
# deb http://archive.canonical.com/ubuntu saucy partner
# deb-src http://archive.canonical.com/ubuntu saucy partner

## This software is not part of Ubuntu, but is offered by third-party
## developers who want to ship their latest software.
#deb http://extras.ubuntu.com/ubuntu saucy main
#deb-src http://extras.ubuntu.com/ubuntu saucy main</code></pre> </div> </div> </div> </div> <div class=sect1> <h2 id=_the_modern_old_kernel_approach>The modern old kernel approach</h2> <div class=sectionbody> <div class=paragraph> <p>Surely, there must be <em>some</em> Linux distribution which uses 3.x kernel, but is still supported, so package system doesn&#8217;t need to be fixed, right?</p> </div> <div class=paragraph> <p>It looked like after half-hour of searching, I found an <a href="https://distrowatch.com/search.php?pkg=linux&relation=less&pkgver=4.0&distrorange=InLatest#pkgsearch">ideal search query</a>. The most popular distribution was CentOS, and I had heard its name before, so it looked perfect.</p> </div> <div class=paragraph> <p>Long story short, pintool doesn&#8217;t work with some obsure exception.</p> </div> <div class=listingblock> <div class=title>Some obsure exception</div> <div class=content> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang=bash>A: Source/pin/injector_nonmac/auxvector.cpp: CopyAux: 291: unexpected AUX VEC type 26

################################################################################
## STACK TRACE
################################################################################
addr2line -C -f -e "/home/j/Downloads/olimpiada-oitimetool-bin-c671d44/pin-2.14-71313-gcc.4.4.7-linux/ia32/bin/pinbin" 0x566a728b 0x566a80f6 0x566a83e1 0x5690c3a7 0x56911972 0x56913809 0x56902e59 0x5690801f 0x568f6202 0x56901cc1 0xf74211b3
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
??
??:0
Detach Service Count: 1
Pin 2.14
Copyright (c) 2003-2015, Intel Corporation. All rights reserved.
@CHARM-VERSION: $Rev: 71293 $
@CHARM-BUILDER: BUILDER
@CHARM-COMPILER: gcc 4.4.7
@CHARM-TARGET: ia32
@CHARM-CFLAGS:  __OPTIMIZE__=1  __NO_INLINE__=__NO_INLINE__
./oitimetool: line 57:  5000 Aborted                 (core dumped) "$PIN_DIR/pin" $OPTIONS "$PIN_DIR0/oitimetool$LIB_SUFFIX" $OITIMETOOL_ARGS -- $*</code></pre> </div> </div> </div> </div> </div> <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css> <script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script> <script>hljs.initHighlighting()</script> </body> </html>